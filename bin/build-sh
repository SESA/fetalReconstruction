#!/bin/bash
set -x
# env
export PATH=/usr/local/cuda-6.5/bin:${PATH}
export LD_LIBRARY_PATH=/usr/local/cuda-6.5/lib64:${LD_LIBRARY_PATH}
# Build fetalReconstruction for Ubunutu 14.04

export ROOTDIR=${FR_ROOTDIR:-${PWD}/../}
export SRCDIR=${FR_SRCDIR:-$ROOTDIR/source}
export BUILDDIR=${FR_BUILDDIR:-$SRCDIR/build}

export CMAKE_FLAGS={$FR_CMAKE_FLAGS:-"-DCMAKE_C_COMPILER=gcc-4.8 \
  -DCMAKE_CXX_COMPILER=g++-4.8 -DCMAKE_BUILD_TYPE=Debug \
  -DBUILD_WITH_TBB=OFF"}  

export CUDA_SDK_INCLUDE_DIR=\
  ${FR_CUDA_SDK_INCLUDE_DIR:-/usr/local/cuda-6.5/samples}

if [ ! -d $BUILDDIR ]; then
  mkdir -p $BUILDDIR
fi

pushd $BUILDDIR
cmake $CMAKE_FLAGS ..
popd
